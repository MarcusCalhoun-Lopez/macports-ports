# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:filetype=tcl:et:sw=4:ts=4:sts=4

PortSystem                              1.0
PortGroup           gcc_build           1.0

name                gcc10
version             10.5.0
subport ${name}     { revision 0 }
subport lib${name}  { revision 0 }
epoch               7

platforms           {darwin >= 10 < 22}

checksums           rmd160  6903815a42b52e9539ac69b1da2f0c2b65d25bca \
                    sha256  25109543fdf46f397c347b5d8b7a2c7e5694a5a51cce4b9c6e1ea8a71ca307c1 \
                    size    77846412

if { ${os.platform} eq "darwin" } {
    # Patch generated from https://github.com/iains/gcc-10-branch
    # git diff --no-prefix d04fe5541c53cb16d1ca5c80da044b4c7633dbc6 gcc-10-5Dr0-pre-0
    patchfiles-append   patch-darwin-gcc.diff
    # https://gcc.gnu.org/bugzilla/show_bug.cgi?id=92061
    patchfiles-append   patch-genconditions.diff
}

# see https://trac.macports.org/ticket/29067
# see https://trac.macports.org/ticket/29104
# see https://trac.macports.org/ticket/47996
# see https://trac.macports.org/ticket/58493
compiler.blacklist-append   {clang < 800} gcc-4.0 *gcc-4.2 {macports-clang-3.[4-7]}
