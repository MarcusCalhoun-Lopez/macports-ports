# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:filetype=tcl:et:sw=4:ts=4:sts=4

PortSystem                              1.0
PortGroup           gcc_build           1.0

name                gcc10
version             10.4.0
subport ${name}     { revision 5 }
subport lib${name}  { revision 5 }
epoch               7

platforms           {darwin >= 10 < 22}

checksums           rmd160  5095b725b8846a4946495f5415aab02c3352d763 \
                    sha256  c9297d5bcd7cb43f3dfc2fed5389e948c9312fd962ef6a4ce455cff963ebe4f1 \
                    size    75018092

if { ${os.platform} eq "darwin" } {
    # Patch generated from https://github.com/iains/gcc-10-branch
    # git diff --no-prefix  releases/gcc-10.4.0 gcc-10-4-darwin-pre-r0
    patchfiles-append   patch-darwin-gcc.diff
    # https://gcc.gnu.org/bugzilla/show_bug.cgi?id=92061
    patchfiles-append   patch-genconditions.diff
}

# see https://trac.macports.org/ticket/29067
# see https://trac.macports.org/ticket/29104
# see https://trac.macports.org/ticket/47996
# see https://trac.macports.org/ticket/58493
compiler.blacklist-append   {clang < 800} gcc-4.0 *gcc-4.2 {macports-clang-3.[4-7]}
